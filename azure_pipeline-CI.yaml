trigger:
  branches:
    include:
    - master
    - develop
  tags:
    include:
    - '*'

pool:
  vmImage: ubuntu-latest

variables:
  AzureContainerRegistry: 'Azure Container Registry'
  ApiName: 'fineract'
  BuildNumber: $(Build.BuildNumber)

stages:
- stage: Build
  jobs:
  - job: Build
    displayName: Build and push Docker image and create Helm package
    steps:
    - template: templates/DockerBuildAndPush.yml
      parameters:
          containerRegistry: $(AzureContainerRegistry)
          repository: $(ApiName)
          tag: $(BuildNumber)